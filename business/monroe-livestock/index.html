<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Monroe Livestock Auction â€” Charlotte-Powered Auction Intelligence</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Oswald:wght@400;500;600;700&display=swap" rel="stylesheet">
<script src="https://d3js.org/d3.v7.min.js"></script>
<style>
*{margin:0;padding:0;box-sizing:border-box}
:root{
  --green-500:#2D6A4F;--green-800:#1B4332;--green-400:#40916C;
  --gold-500:#D4A017;--gold-600:#B8860B;--gold-300:#F0C850;
  --brown-500:#8B4513;--brown-400:#A0522D;
  --bg:#0F1A14;--surface:#162219;--border:#1E3228;
  --text:#E8E4DF;--text-dim:#7A8B7E;
  --glass-bg:rgba(15,26,20,0.92);--glass-border:rgba(45,106,79,0.18);
}
html{scroll-behavior:smooth}
body{background:var(--bg);color:var(--text);font-family:'Inter',system-ui,sans-serif;overflow-x:hidden;line-height:1.6}

/* === SCROLL CONTENT === */
#scroll-content{position:relative;z-index:10}
.section{min-height:auto;display:flex;align-items:center;justify-content:center;padding:60px 24px;pointer-events:none}
.section-inner{max-width:960px;width:100%;pointer-events:auto}

/* Glass */
.glass{
  background:var(--glass-bg);
  backdrop-filter:blur(16px);-webkit-backdrop-filter:blur(16px);
  border:1px solid var(--glass-border);
  border-radius:16px;
  padding:48px;
  opacity:0;transform:translateY(40px);
  transition:opacity 0.8s ease,transform 0.8s ease;
}
.glass.visible{opacity:1;transform:translateY(0)}

/* === TYPOGRAPHY === */
h1.hero-title{
  font-family:'Oswald',sans-serif;font-size:clamp(36px,8vw,72px);font-weight:700;letter-spacing:4px;
  background:linear-gradient(135deg,var(--green-500),var(--gold-500));
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;
  background-clip:text;line-height:1.1;margin-bottom:8px;
}
.hero-sub{font-family:'Oswald',sans-serif;font-size:clamp(14px,2.5vw,20px);font-weight:400;letter-spacing:3px;text-transform:uppercase;color:var(--green-400);margin-bottom:24px}
.hero-desc{font-size:15px;color:var(--text-dim);max-width:650px;margin-bottom:32px;line-height:1.8}
.hero-badge{display:inline-block;padding:6px 16px;border:1px solid var(--gold-500);border-radius:20px;font-size:11px;letter-spacing:2px;color:var(--gold-500);text-transform:uppercase;margin-bottom:20px}

h2.section-title{
  font-family:'Oswald',sans-serif;font-size:clamp(26px,4.5vw,40px);font-weight:600;letter-spacing:2px;
  color:var(--text);margin-bottom:8px;line-height:1.2;
}
h2.section-title span.accent{color:var(--green-400)}
h2.section-title span.gold{color:var(--gold-500)}
.section-subtitle{font-size:13px;color:var(--green-400);letter-spacing:2px;text-transform:uppercase;margin-bottom:20px;font-weight:600}
.section-body{font-size:15px;color:var(--text-dim);line-height:1.8;margin-bottom:24px}
.section-body strong{color:var(--text)}

/* === STAT BAR === */
.stat-bar{display:flex;flex-wrap:wrap;gap:0;border:1px solid var(--glass-border);border-radius:10px;overflow:hidden;margin-top:8px}
.stat-item{flex:1;min-width:100px;padding:14px 10px;text-align:center;border-right:1px solid var(--glass-border);background:rgba(45,106,79,0.04)}
.stat-item:last-child{border-right:none}
.stat-val{display:block;font-family:'Oswald',sans-serif;font-size:22px;font-weight:600;color:var(--text)}
.stat-lbl{display:block;font-size:9px;letter-spacing:2px;color:var(--text-dim);margin-top:4px;text-transform:uppercase}

/* === CHART CONTAINERS === */
.chart-wrap{width:100%;margin-top:20px;overflow:hidden}
.chart-wrap svg{width:100%;display:block}
.chart-legend{display:flex;gap:16px;flex-wrap:wrap;margin-top:12px;justify-content:center}
.chart-legend-item{display:flex;align-items:center;gap:6px;font-size:12px;color:var(--text-dim)}
.chart-legend-swatch{width:12px;height:12px;border-radius:3px}

/* === BEFORE/AFTER SPLIT === */
.split{display:grid;grid-template-columns:1fr 1fr;gap:24px;margin-top:24px}
.split-panel{border-radius:12px;padding:24px}
.split-before{background:rgba(30,50,40,0.25);border:1px solid rgba(122,139,126,0.2)}
.split-after{background:rgba(45,106,79,0.08);border:1px solid var(--glass-border)}
.split-label{font-family:'Oswald',sans-serif;font-size:12px;letter-spacing:3px;text-transform:uppercase;margin-bottom:12px;font-weight:600}
.split-label.before{color:var(--text-dim)}
.split-label.after{color:var(--green-400)}
.split-list{list-style:none;padding:0}
.split-list li{padding:6px 0;font-size:13px;color:var(--text-dim);border-bottom:1px solid rgba(255,255,255,0.03)}
.split-list li::before{content:'';display:inline-block;width:6px;height:6px;border-radius:50%;margin-right:10px;vertical-align:middle}
.split-before .split-list li::before{background:var(--text-dim)}
.split-after .split-list li::before{background:var(--green-400)}

/* === CATEGORY GRID === */
.cat-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:12px;margin-top:24px}
.cat-card{background:rgba(45,106,79,0.06);border:1px solid var(--glass-border);border-radius:12px;padding:20px;transition:border-color 0.3s,transform 0.3s}
.cat-card:hover{border-color:var(--green-500);transform:translateY(-2px)}
.cat-icon{font-size:28px;margin-bottom:10px;display:block}
.cat-card h4{font-family:'Oswald',sans-serif;font-size:15px;font-weight:600;letter-spacing:1px;color:var(--text);margin-bottom:4px}
.cat-card .cat-time{font-size:11px;color:var(--gold-500);margin-bottom:6px;letter-spacing:1px}
.cat-card p{font-size:12px;color:var(--text-dim);line-height:1.5}

/* === FORCE GRAPH === */
#substrate-chart{width:100%;margin-top:20px}
#substrate-chart svg{display:block;width:100%}
.node-tooltip{position:absolute;background:var(--glass-bg);border:1px solid var(--glass-border);border-radius:8px;padding:8px 14px;font-size:12px;color:var(--text);pointer-events:none;opacity:0;transition:opacity 0.2s;z-index:100;backdrop-filter:blur(12px);white-space:nowrap}
.node-tooltip .tt-type{color:var(--green-400);font-size:10px;letter-spacing:1px;text-transform:uppercase}

/* === COMPETITOR TABLE === */
.comp-table{width:100%;border-collapse:collapse;margin-top:20px;font-size:13px}
.comp-table th{text-align:left;font-family:'Oswald',sans-serif;font-size:11px;letter-spacing:2px;color:var(--green-400);padding:10px 12px;border-bottom:1px solid var(--glass-border);text-transform:uppercase}
.comp-table td{padding:10px 12px;border-bottom:1px solid rgba(255,255,255,0.03);color:var(--text-dim)}
.comp-table td:first-child{color:var(--text);font-weight:500}
.comp-table tr:hover td{background:rgba(45,106,79,0.04)}
.comp-advantage{margin-top:16px;padding:14px 18px;border-left:3px solid var(--gold-500);background:rgba(212,160,23,0.06);border-radius:0 8px 8px 0;font-size:13px;color:var(--text-dim)}
.comp-advantage strong{color:var(--gold-500)}

/* === INVESTMENT CARD === */
.invest-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:0;border:1px solid var(--glass-border);border-radius:12px;overflow:hidden;margin-top:24px}
.invest-cell{padding:24px;text-align:center;border-right:1px solid var(--glass-border);background:rgba(45,106,79,0.04)}
.invest-cell:last-child{border-right:none}
.invest-cell.highlight{background:rgba(212,160,23,0.08);border-color:rgba(212,160,23,0.15)}
.invest-amount{font-family:'Oswald',sans-serif;font-size:32px;font-weight:700;color:var(--gold-500)}
.invest-label{font-size:10px;letter-spacing:2px;color:var(--text-dim);text-transform:uppercase;margin-top:4px}
.invest-note{font-size:11px;color:var(--text-dim);margin-top:6px}
.roi-line{margin-top:20px;padding:16px 20px;border:1px solid rgba(212,160,23,0.2);border-radius:10px;background:rgba(212,160,23,0.04);font-size:14px;color:var(--text-dim);text-align:center;line-height:1.6}
.roi-line strong{color:var(--gold-500)}

/* === FOOTER === */
.footer{text-align:center;padding:48px 24px 64px;font-size:12px;color:var(--text-dim);line-height:1.8}
.footer a{color:var(--green-400);text-decoration:none}
.footer .tagline{font-family:'Oswald',sans-serif;font-size:18px;letter-spacing:2px;color:var(--text);margin-top:12px;font-weight:400}

/* === SPACER === */
.spacer{height:20vh;pointer-events:none}

/* === MOBILE === */
@media(max-width:640px){
  .glass{padding:28px 20px}
  .split{grid-template-columns:1fr}
  .cat-grid{grid-template-columns:1fr}
  .invest-grid{grid-template-columns:1fr}
  .invest-cell{border-right:none;border-bottom:1px solid var(--glass-border)}
  .invest-cell:last-child{border-bottom:none}
  .stat-item{min-width:80px;padding:10px 6px}
  .stat-val{font-size:18px}
  .comp-table{font-size:11px}
  .comp-table th,.comp-table td{padding:6px 8px}
}

/* === SCROLLBAR === */
::-webkit-scrollbar{width:6px}
::-webkit-scrollbar-track{background:transparent}
::-webkit-scrollbar-thumb{background:var(--green-800);border-radius:3px}
::-webkit-scrollbar-thumb:hover{background:var(--green-500)}
</style>
</head>
<body>

<div id="scroll-content">

  <div class="spacer"></div>

  <!-- SECTION 1: HERO -->
  <div class="section">
    <div class="section-inner">
      <div class="glass">
        <div class="hero-badge">Foundation Tier &middot; Est. 2024</div>
        <h1 class="hero-title">MONROE LIVESTOCK AUCTION</h1>
        <div class="hero-sub">Charlotte-Powered Auction Intelligence</div>
        <p class="hero-desc">Weekly livestock marketplace serving Adams County and the world's largest Swiss Amish settlement. Every Tuesday sale generates intelligence.</p>
        <div class="stat-bar">
          <div class="stat-item"><span class="stat-val">52</span><span class="stat-lbl">Sales / Year</span></div>
          <div class="stat-item"><span class="stat-val">4</span><span class="stat-lbl">Species</span></div>
          <div class="stat-item"><span class="stat-val">12+</span><span class="stat-lbl">Specialty Sales</span></div>
          <div class="stat-item"><span class="stat-val">DVAuction</span><span class="stat-lbl">Live</span></div>
        </div>
      </div>
    </div>
  </div>

  <!-- SECTION 2: WEEKLY SALE PERFORMANCE -->
  <div class="section">
    <div class="section-inner">
      <div class="glass">
        <div class="section-subtitle">Performance</div>
        <h2 class="section-title">WEEKLY SALE <span class="accent">PERFORMANCE</span></h2>
        <div class="chart-wrap" id="weekly-chart"></div>
        <div class="chart-legend">
          <div class="chart-legend-item"><div class="chart-legend-swatch" style="background:#2D6A4F"></div>Cattle</div>
          <div class="chart-legend-item"><div class="chart-legend-swatch" style="background:#D4A017"></div>Horses</div>
          <div class="chart-legend-item"><div class="chart-legend-swatch" style="background:#8B4513"></div>Small Animals</div>
          <div class="chart-legend-item"><div class="chart-legend-swatch" style="background:#A0522D"></div>Exotics</div>
        </div>
      </div>
    </div>
  </div>

  <!-- SECTION 3: PRICE TRENDS -->
  <div class="section">
    <div class="section-inner">
      <div class="glass">
        <div class="section-subtitle">Market Data</div>
        <h2 class="section-title">FEEDER CALF <span class="gold">PRICE TRENDS</span></h2>
        <p class="section-body" style="margin-bottom:8px">Price per CWT (hundredweight)</p>
        <div class="chart-wrap" id="price-chart"></div>
        <div class="chart-legend">
          <div class="chart-legend-item"><div class="chart-legend-swatch" style="background:#2D6A4F"></div>Monroe Avg</div>
          <div class="chart-legend-item"><div class="chart-legend-swatch" style="background:#D4A017;opacity:0.5;border:1px dashed #D4A017"></div>Topeka Avg</div>
        </div>
      </div>
    </div>
  </div>

  <!-- SECTION 4: BEFORE / AFTER -->
  <div class="section">
    <div class="section-inner">
      <div class="glass">
        <div class="section-subtitle">Transformation</div>
        <h2 class="section-title">WHAT BECOMES <span class="accent">OBSERVABLE</span></h2>
        <div class="split">
          <div class="split-panel split-before">
            <div class="split-label before">Before Charlotte</div>
            <ul class="split-list">
              <li>Paper reports filed and forgotten</li>
              <li>No buyer tracking</li>
              <li>Manual settlement</li>
              <li>No competitive intelligence</li>
              <li>Specialty sales by tradition</li>
              <li>DVAuction as a black box</li>
            </ul>
          </div>
          <div class="split-panel split-after">
            <div class="split-label after">With Charlotte</div>
            <ul class="split-list">
              <li>Living price dashboard updated weekly</li>
              <li>Anonymized buyer patterns and repeat rates</li>
              <li>Automated consignor statements</li>
              <li>Price benchmarking vs Topeka &amp; Shipshewana</li>
              <li>Data-driven specialty sale optimization</li>
              <li>Online vs floor bid analytics</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- SECTION 5: SALE CATEGORIES -->
  <div class="section">
    <div class="section-inner">
      <div class="glass">
        <div class="section-subtitle">Catalog</div>
        <h2 class="section-title">SALE <span class="accent">CATEGORIES</span></h2>
        <div class="cat-grid">
          <div class="cat-card">
            <span class="cat-icon">&#x1F404;</span>
            <h4>Weekly Cattle</h4>
            <div class="cat-time">Tuesdays 11 AM</div>
            <p>Feeder calves, bred stock, cow-calf pairs</p>
          </div>
          <div class="cat-card">
            <span class="cat-icon">&#x1F434;</span>
            <h4>Horse Sales</h4>
            <div class="cat-time">Specialty</div>
            <p>Driving, draft, ponies, stallions, yearlings</p>
          </div>
          <div class="cat-card">
            <span class="cat-icon">&#x1F413;</span>
            <h4>Small Animals</h4>
            <div class="cat-time">Tuesdays 5 PM</div>
            <p>Poultry, rabbits, small livestock</p>
          </div>
          <div class="cat-card">
            <span class="cat-icon">&#x1F98E;</span>
            <h4>Exotic Animals</h4>
            <div class="cat-time">April</div>
            <p>Multi-day specialty event</p>
          </div>
          <div class="cat-card">
            <span class="cat-icon">&#x1F4E1;</span>
            <h4>DVAuction Live</h4>
            <div class="cat-time">Every Sale</div>
            <p>Real-time internet broadcast &amp; bidding</p>
          </div>
          <div class="cat-card">
            <span class="cat-icon">&#x1F4CA;</span>
            <h4>Charlotte Intelligence</h4>
            <div class="cat-time">Always On</div>
            <p>Price trends, buyer patterns, market analytics</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- SECTION 6: CHARLOTTE SUBSTRATE -->
  <div class="section">
    <div class="section-inner">
      <div class="glass">
        <div class="section-subtitle">Knowledge Graph</div>
        <h2 class="section-title">THE CHARLOTTE <span class="accent">SUBSTRATE</span></h2>
        <p class="section-body" style="margin-bottom:4px">347 lines &middot; 7 node types &middot; 7 edge types &middot; 7 metric families</p>
        <div id="substrate-chart"></div>
        <div class="node-tooltip" id="node-tooltip">
          <div class="tt-type"></div>
          <div class="tt-name"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- SECTION 7: COMPETITIVE LANDSCAPE -->
  <div class="section">
    <div class="section-inner">
      <div class="glass">
        <div class="section-subtitle">Competition</div>
        <h2 class="section-title">COMPETITIVE <span class="gold">LANDSCAPE</span></h2>
        <table class="comp-table">
          <thead>
            <tr><th>Competitor</th><th>Sale Day</th><th>Distance</th><th>Differentiator</th></tr>
          </thead>
          <tbody>
            <tr>
              <td>Topeka Livestock</td>
              <td>Tuesday</td>
              <td>~60 mi</td>
              <td>Draft horse world records, USDA reported</td>
            </tr>
            <tr>
              <td>Shipshewana</td>
              <td>Wed + Fri</td>
              <td>~65 mi</td>
              <td>100+ years, largest in Indiana</td>
            </tr>
            <tr>
              <td>Stony Pike</td>
              <td>Thursday</td>
              <td>~80 mi</td>
              <td>USDA reported</td>
            </tr>
            <tr>
              <td>Knightstown Sale Barn</td>
              <td>Saturday</td>
              <td>~110 mi</td>
              <td>Facility built 1890</td>
            </tr>
            <tr>
              <td>Dinky's Auction Center</td>
              <td>Friday</td>
              <td>~90 mi</td>
              <td>Heart of Daviess County Amish, 8+ rings</td>
            </tr>
          </tbody>
        </table>
        <div class="comp-advantage">
          <strong>Monroe's advantage:</strong> Only dedicated weekly livestock barn in Adams County &mdash; the heart of the world's largest Swiss Amish settlement.
        </div>
      </div>
    </div>
  </div>

  <!-- SECTION 8: INVESTMENT -->
  <div class="section">
    <div class="section-inner">
      <div class="glass">
        <div class="section-subtitle">Partnership</div>
        <h2 class="section-title"><span class="gold">INVESTMENT</span></h2>
        <div class="invest-grid">
          <div class="invest-cell">
            <div class="invest-amount">$7,500</div>
            <div class="invest-label">Deployment</div>
            <div class="invest-note">One-time</div>
          </div>
          <div class="invest-cell highlight">
            <div class="invest-amount">$2,500</div>
            <div class="invest-label">Monthly</div>
            <div class="invest-note">Per month</div>
          </div>
          <div class="invest-cell">
            <div class="invest-amount">$67,500</div>
            <div class="invest-label">2-Year Total</div>
            <div class="invest-note">All-in</div>
          </div>
        </div>
        <div class="roi-line">
          <strong>3% revenue improvement</strong> on a $1M operation = <strong>$30K/year</strong>.<br>
          Charlotte pays for itself in year one.
        </div>
      </div>
    </div>
  </div>

  <!-- SECTION 9: FOOTER -->
  <footer class="footer">
    <div>Charlotte OS &middot; <a href="https://someai.dev">SomeAI</a> &middot; <a href="https://www.monroelivestockauction.com">monroelivestockauction.com</a></div>
    <div class="tagline">The barn already has a story. Charlotte tells it.</div>
  </footer>

  <div class="spacer" style="height:10vh"></div>

</div>

<!-- SCROLL ANIMATION -->
<script>
(function(){
  var panels = document.querySelectorAll('.glass');
  var observer = new IntersectionObserver(function(entries){
    entries.forEach(function(entry){
      if(entry.isIntersecting) entry.target.classList.add('visible');
    });
  }, {threshold:0.08, rootMargin:'0px 0px -40px 0px'});
  panels.forEach(function(p){ observer.observe(p); });
})();
</script>

<!-- D3 CHARTS -->
<script>
(function(){

  // =============================================
  // DATA: Weekly Sale Performance (12 weeks)
  // =============================================
  var weeklyData = [
    {week:'Nov 5',  cattle:62, horses:0,  small:35, exotics:0},
    {week:'Nov 12', cattle:58, horses:8,  small:28, exotics:0},
    {week:'Nov 19', cattle:71, horses:0,  small:42, exotics:0},
    {week:'Nov 26', cattle:45, horses:0,  small:22, exotics:0},
    {week:'Dec 3',  cattle:68, horses:12, small:38, exotics:0},
    {week:'Dec 10', cattle:55, horses:0,  small:30, exotics:0},
    {week:'Dec 17', cattle:48, horses:0,  small:26, exotics:0},
    {week:'Dec 24', cattle:40, horses:0,  small:18, exotics:0},
    {week:'Jan 7',  cattle:72, horses:0,  small:44, exotics:0},
    {week:'Jan 14', cattle:65, horses:10, small:36, exotics:0},
    {week:'Jan 21', cattle:78, horses:0,  small:48, exotics:0},
    {week:'Jan 28', cattle:60, horses:0,  small:32, exotics:0}
  ];

  var categories = ['cattle','horses','small','exotics'];
  var catColors = {cattle:'#2D6A4F', horses:'#D4A017', small:'#8B4513', exotics:'#A0522D'};

  // Stack the data
  var stack = d3.stack().keys(categories);
  var series = stack(weeklyData);

  var container = document.getElementById('weekly-chart');
  var cw = container.clientWidth || 860;
  var margin = {top:20, right:20, bottom:40, left:50};
  var w = cw - margin.left - margin.right;
  var h = 280 - margin.top - margin.bottom;

  var svg = d3.select('#weekly-chart').append('svg')
    .attr('viewBox', '0 0 ' + cw + ' 280')
    .attr('preserveAspectRatio', 'xMidYMid meet');

  var g = svg.append('g').attr('transform','translate('+margin.left+','+margin.top+')');

  var x = d3.scaleBand().domain(weeklyData.map(function(d){return d.week})).range([0,w]).padding(0.25);
  var yMax = d3.max(series[series.length-1], function(d){return d[1]});
  var y = d3.scaleLinear().domain([0, yMax + 10]).range([h,0]);

  // Axes
  g.append('g').attr('transform','translate(0,'+h+')')
    .call(d3.axisBottom(x).tickSize(0))
    .selectAll('text').attr('fill','#7A8B7E').attr('font-size','10px')
    .attr('transform','rotate(-30)').attr('text-anchor','end');
  g.selectAll('.domain').attr('stroke','#1E3228');

  g.append('g').call(d3.axisLeft(y).ticks(5).tickSize(-w))
    .selectAll('text').attr('fill','#7A8B7E').attr('font-size','10px');
  g.selectAll('.tick line').attr('stroke','#1E3228').attr('stroke-opacity',0.5);
  g.selectAll('.domain').attr('stroke','#1E3228');

  // Y-axis label
  g.append('text').attr('transform','rotate(-90)').attr('x',-h/2).attr('y',-38)
    .attr('text-anchor','middle').attr('fill','#7A8B7E').attr('font-size','11px').text('Head Count');

  // Bars
  series.forEach(function(s){
    g.selectAll('.bar-'+s.key).data(s).enter().append('rect')
      .attr('x', function(d){return x(d.data.week)})
      .attr('y', function(d){return y(d[1])})
      .attr('height', function(d){return y(d[0]) - y(d[1])})
      .attr('width', x.bandwidth())
      .attr('fill', catColors[s.key])
      .attr('rx', 2);
  });


  // =============================================
  // DATA: Feeder Calf Price Trends (12 weeks)
  // =============================================
  var priceData = [
    {week:'Nov 5',  monroe:195, topeka:201},
    {week:'Nov 12', monroe:198, topeka:204},
    {week:'Nov 19', monroe:192, topeka:199},
    {week:'Nov 26', monroe:188, topeka:196},
    {week:'Dec 3',  monroe:194, topeka:200},
    {week:'Dec 10', monroe:200, topeka:207},
    {week:'Dec 17', monroe:203, topeka:210},
    {week:'Dec 24', monroe:197, topeka:205},
    {week:'Jan 7',  monroe:208, topeka:214},
    {week:'Jan 14', monroe:212, topeka:218},
    {week:'Jan 21', monroe:206, topeka:213},
    {week:'Jan 28', monroe:210, topeka:216}
  ];

  var pc = document.getElementById('price-chart');
  var pcw = pc.clientWidth || 860;
  var pm = {top:20, right:20, bottom:40, left:55};
  var pw = pcw - pm.left - pm.right;
  var ph = 280 - pm.top - pm.bottom;

  var psvg = d3.select('#price-chart').append('svg')
    .attr('viewBox', '0 0 ' + pcw + ' 280')
    .attr('preserveAspectRatio', 'xMidYMid meet');

  var pg = psvg.append('g').attr('transform','translate('+pm.left+','+pm.top+')');

  var px = d3.scalePoint().domain(priceData.map(function(d){return d.week})).range([0,pw]).padding(0.5);
  var py = d3.scaleLinear().domain([180, 225]).range([ph,0]);

  // Axes
  pg.append('g').attr('transform','translate(0,'+ph+')')
    .call(d3.axisBottom(px).tickSize(0))
    .selectAll('text').attr('fill','#7A8B7E').attr('font-size','10px')
    .attr('transform','rotate(-30)').attr('text-anchor','end');
  pg.selectAll('.domain').attr('stroke','#1E3228');

  pg.append('g').call(d3.axisLeft(py).ticks(5).tickSize(-pw).tickFormat(function(d){return '$'+d}))
    .selectAll('text').attr('fill','#7A8B7E').attr('font-size','10px');
  pg.selectAll('.tick line').attr('stroke','#1E3228').attr('stroke-opacity',0.5);
  pg.selectAll('.domain').attr('stroke','#1E3228');

  // Y-axis label
  pg.append('text').attr('transform','rotate(-90)').attr('x',-ph/2).attr('y',-42)
    .attr('text-anchor','middle').attr('fill','#7A8B7E').attr('font-size','11px').text('$/CWT');

  // Area fill for Monroe
  var areaGen = d3.area()
    .x(function(d){return px(d.week)})
    .y0(ph)
    .y1(function(d){return py(d.monroe)})
    .curve(d3.curveMonotoneX);

  var gradId = 'monroe-area-grad';
  var defs = psvg.append('defs');
  var grad = defs.append('linearGradient').attr('id',gradId).attr('x1','0').attr('y1','0').attr('x2','0').attr('y2','1');
  grad.append('stop').attr('offset','0%').attr('stop-color','#2D6A4F').attr('stop-opacity',0.35);
  grad.append('stop').attr('offset','100%').attr('stop-color','#2D6A4F').attr('stop-opacity',0.02);

  pg.append('path').datum(priceData).attr('d', areaGen).attr('fill','url(#'+gradId+')');

  // Monroe line
  var lineGen = d3.line().x(function(d){return px(d.week)}).y(function(d){return py(d.monroe)}).curve(d3.curveMonotoneX);
  pg.append('path').datum(priceData).attr('d', lineGen).attr('fill','none').attr('stroke','#2D6A4F').attr('stroke-width',2.5);

  // Monroe dots
  pg.selectAll('.m-dot').data(priceData).enter().append('circle')
    .attr('cx',function(d){return px(d.week)}).attr('cy',function(d){return py(d.monroe)})
    .attr('r',3.5).attr('fill','#2D6A4F').attr('stroke','#0F1A14').attr('stroke-width',1.5);

  // Topeka dashed line
  var topekaLine = d3.line().x(function(d){return px(d.week)}).y(function(d){return py(d.topeka)}).curve(d3.curveMonotoneX);
  pg.append('path').datum(priceData).attr('d', topekaLine)
    .attr('fill','none').attr('stroke','#D4A017').attr('stroke-width',1.5)
    .attr('stroke-dasharray','6,4').attr('opacity',0.6);

  // Labels
  pg.append('text').attr('x',pw-4).attr('y',py(priceData[priceData.length-1].monroe)-8)
    .attr('text-anchor','end').attr('fill','#2D6A4F').attr('font-size','11px').attr('font-weight','600').text('Monroe');
  pg.append('text').attr('x',pw-4).attr('y',py(priceData[priceData.length-1].topeka)-8)
    .attr('text-anchor','end').attr('fill','#D4A017').attr('font-size','11px').attr('font-weight','600').attr('opacity',0.7).text('Topeka');


  // =============================================
  // FORCE-DIRECTED GRAPH: Charlotte Substrate
  // =============================================
  var graphNodes = [
    {id:'MLA',       label:'Monroe Livestock Auction', type:'Company',    color:'#2D6A4F', r:18},
    {id:'Tyler',     label:'Tyler Bluhm',              type:'Person',     color:'#D4A017', r:10},
    {id:'Mel',       label:'Mel',                      type:'Person',     color:'#D4A017', r:8},
    {id:'Cattle',    label:'Weekly Cattle Sale',        type:'Sale',       color:'#8B4513', r:11},
    {id:'Horse',     label:'Driving Horse Sale',        type:'Sale',       color:'#8B4513', r:10},
    {id:'SmallAn',   label:'Small Animal Sale',         type:'Sale',       color:'#8B4513', r:10},
    {id:'Exotic',    label:'Exotic Animal Sale',        type:'Sale',       color:'#A0522D', r:9},
    {id:'CattleSp',  label:'Cattle',                   type:'Species',    color:'#40916C', r:8},
    {id:'HorseSp',   label:'Horse',                    type:'Species',    color:'#40916C', r:8},
    {id:'PoultrySp', label:'Poultry',                  type:'Species',    color:'#40916C', r:7},
    {id:'ExoticSp',  label:'Exotic',                   type:'Species',    color:'#40916C', r:7},
    {id:'DVAuction', label:'DVAuction',                type:'Platform',   color:'#7A8B7E', r:8},
    {id:'BeefWire',  label:'National Beef Wire',       type:'Platform',   color:'#7A8B7E', r:7},
    {id:'Topeka',    label:'Topeka Livestock',          type:'Competitor', color:'#6B3030', r:8},
    {id:'Shipshewana',label:'Shipshewana',             type:'Competitor', color:'#6B3030', r:7}
  ];

  var graphLinks = [
    {source:'MLA', target:'Tyler',     type:'employs'},
    {source:'MLA', target:'Mel',       type:'employs'},
    {source:'MLA', target:'Cattle',    type:'operates'},
    {source:'MLA', target:'Horse',     type:'operates'},
    {source:'MLA', target:'SmallAn',   type:'operates'},
    {source:'MLA', target:'Exotic',    type:'operates'},
    {source:'Cattle',  target:'CattleSp',  type:'speciesOf'},
    {source:'Horse',   target:'HorseSp',   type:'speciesOf'},
    {source:'SmallAn', target:'PoultrySp', type:'speciesOf'},
    {source:'Exotic',  target:'ExoticSp',  type:'speciesOf'},
    {source:'MLA', target:'DVAuction',  type:'usesPlatform'},
    {source:'MLA', target:'BeefWire',   type:'usesPlatform'},
    {source:'MLA', target:'Topeka',     type:'competesWith'},
    {source:'MLA', target:'Shipshewana',type:'competesWith'},
    {source:'Tyler', target:'Cattle',   type:'manages'},
    {source:'Mel',   target:'Horse',    type:'manages'}
  ];

  var edgeColors = {
    employs:'#D4A017', operates:'#2D6A4F', speciesOf:'#40916C',
    usesPlatform:'#7A8B7E', competesWith:'#6B3030', manages:'#B8860B'
  };

  var sc = document.getElementById('substrate-chart');
  var scw = sc.clientWidth || 860;
  var sch = 380;

  var ssvg = d3.select('#substrate-chart').append('svg')
    .attr('viewBox','0 0 '+scw+' '+sch)
    .attr('preserveAspectRatio','xMidYMid meet');

  var tooltip = document.getElementById('node-tooltip');

  var simulation = d3.forceSimulation(graphNodes)
    .force('link', d3.forceLink(graphLinks).id(function(d){return d.id}).distance(80))
    .force('charge', d3.forceManyBody().strength(-250))
    .force('center', d3.forceCenter(scw/2, sch/2))
    .force('collision', d3.forceCollide().radius(function(d){return d.r+8}));

  var link = ssvg.append('g').selectAll('line').data(graphLinks).enter().append('line')
    .attr('stroke', function(d){return edgeColors[d.type] || '#1E3228'})
    .attr('stroke-width', 1.2)
    .attr('stroke-opacity', 0.45);

  var node = ssvg.append('g').selectAll('g').data(graphNodes).enter().append('g')
    .call(d3.drag()
      .on('start', function(event,d){ if(!event.active) simulation.alphaTarget(0.3).restart(); d.fx=d.x; d.fy=d.y; })
      .on('drag', function(event,d){ d.fx=event.x; d.fy=event.y; })
      .on('end', function(event,d){ if(!event.active) simulation.alphaTarget(0); d.fx=null; d.fy=null; })
    );

  // Glow
  node.append('circle')
    .attr('r', function(d){return d.r * 2.2})
    .attr('fill', function(d){return d.color})
    .attr('opacity', 0.08);

  // Node circle
  node.append('circle')
    .attr('r', function(d){return d.r})
    .attr('fill', function(d){return d.color})
    .attr('stroke', '#0F1A14')
    .attr('stroke-width', 1.5)
    .attr('cursor', 'pointer');

  // Labels
  node.append('text')
    .text(function(d){return d.label})
    .attr('dy', function(d){return -d.r - 6})
    .attr('text-anchor','middle')
    .attr('fill','rgba(232,228,223,0.55)')
    .attr('font-size','9px')
    .attr('font-family','Inter, sans-serif')
    .attr('pointer-events','none');

  // Tooltip
  node.on('mouseenter', function(event,d){
    tooltip.querySelector('.tt-type').textContent = d.type;
    tooltip.querySelector('.tt-name').textContent = d.label;
    tooltip.style.opacity = '1';
  }).on('mousemove', function(event){
    var rect = sc.getBoundingClientRect();
    tooltip.style.left = (event.clientX - rect.left + 14) + 'px';
    tooltip.style.top = (event.clientY - rect.top - 20) + 'px';
  }).on('mouseleave', function(){
    tooltip.style.opacity = '0';
  });

  simulation.on('tick', function(){
    link.attr('x1',function(d){return d.source.x}).attr('y1',function(d){return d.source.y})
        .attr('x2',function(d){return d.target.x}).attr('y2',function(d){return d.target.y});
    node.attr('transform', function(d){return 'translate('+d.x+','+d.y+')'});
  });

})();
</script>

</body>
</html>